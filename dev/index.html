<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <!-- This is the Waymark Logo in SVG format -->
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 368 368'%3E%3Cg transform='translate(0,368) scale(0.1,-0.1)'%0Afill='%23b42714'%3E%3Cpath d='M343 3186 c-89 -29 -178 -108 -215 -194 -80 -181 21 -408 208 -468%0Al51 -17 238 -781 c131 -430 241 -787 243 -793 3 -10 -21 -13 -99 -14 -57 0%0A-126 -4 -152 -7 l-48 -7 298 -217 c163 -119 299 -216 300 -214 6 6 252 690%0A249 693 -1 2 -59 -33 -129 -77 -70 -43 -128 -76 -130 -72 -2 4 -111 359 -242%0A790 l-239 782 32 33 c17 17 43 59 59 92 23 50 27 74 28 140 0 71 -4 88 -33%0A147 -37 75 -96 133 -170 169 -58 28 -186 36 -249 15z'/%3E%3Cpath d='M1580 2987 l-294 -212 64 -6 c36 -4 105 -7 153 -8 87 -1 88 -1 81%0A-23 -3 -13 -74 -236 -156 -496 l-150 -473 55 -199 c30 -110 62 -206 70 -215%0A19 -18 41 -19 54 -2 5 6 101 303 214 659 112 356 207 648 210 648 3 0 57 -33%0A120 -73 63 -40 120 -76 126 -81 7 -4 -17 78 -53 181 -36 103 -91 261 -122 351%0A-31 89 -61 162 -67 161 -5 0 -143 -96 -305 -212z'/%3E%3Cpath d='M3040 2987 l-294 -212 64 -6 c36 -4 105 -7 153 -8 87 -1 88 -1 81%0A-23 -3 -13 -74 -236 -156 -496 l-150 -473 55 -199 c30 -110 62 -206 70 -215%0A19 -18 41 -19 54 -2 5 6 101 303 214 659 112 356 207 648 210 648 3 0 57 -33%0A120 -73 63 -40 120 -76 126 -81 7 -4 -17 78 -53 181 -36 103 -91 261 -122 351%0A-31 89 -61 162 -67 161 -5 0 -143 -96 -305 -212z'/%3E%3Cpath d='M2161 2342 c-14 -11 -40 -80 -81 -207 -33 -104 -60 -197 -60 -205 0%0A-8 61 -235 135 -504 74 -270 135 -491 135 -493 0 -1 -68 -4 -152 -5 l-152 -3%0A284 -219 c157 -121 290 -223 295 -227 7 -5 58 113 144 332 73 187 131 342 129%0A344 -2 3 -61 -29 -130 -69 l-126 -73 -47 166 c-25 91 -108 390 -183 664 -94%0A338 -143 502 -154 508 -11 6 -23 3 -37 -9z'/%3E%3C/g%3E%3C/svg%3E%0A"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Waymark JS</title>

    <style type="text/css">
      /* Fullscreen!  */
      .test-wrap,
      html,
      body {
        width: 100%;
        height: 100%;
      }
      .test-wrap {
        width: 100%;
        /*        height: 100%;
        margin: 30px;
*/
      }
    </style>
  </head>
  <body>
    <script type="module" lang="ts">
      import { useWaymark } from "../library/useWaymark.js";

      const { createInstance } = useWaymark();

      const init = () => {
        // const testIDs = ["waymark", "af-ccc", "lemiecime-it", "via-ardeche"];
        const testIDs = ["waymark"];

        const testSizes = [
          // [480, 320], // Mobile landscape
          // [320, 480], // Mobile portrait
          // [768, 1024], // Tablet landscape
          [1024, 768], // Tablet portrait
          // [1440, 900], // Desktop landscape
          // [900, 1440], // Desktop portrait
        ];

        testIDs.forEach((ID, i) => {
          testSizes.forEach(async (size) => {
            // Create a div for each test data
            const div = document.createElement("div");
            div.id = "dev-" + ID + "-" + size.join("x");
            div.className = "test-wrap";
            // div.style.height = `${size[1]}px`;
            // div.style.width = `${size[0]}px`;
            document.body.appendChild(div);

            // Read test config (JSON)
            let testConfig = await fetch(`./data/${ID}/devConfig.json`).then(
              (res) => res.json(),
            );

            // Merge Object
            testConfig = Object.assign(testConfig, {
              div_id: div.id,
              units: "metric",
              // maplibre_options: {
              //   // Default
              //   center: [45.0, 20.0],
              //   zoom: 12,
              //   // Optional
              //   zoomControl: false,
              // },
            });

            // Read test data (JSON)
            const testData = await fetch(`./data/${ID}/devData.json`).then(
              (res) => res.json(),
            );

            createInstance({
              map_options: testConfig,
              geoJSON: testData,
            });
          });
        });
      };

      init();
    </script>
  </body>
</html>
