<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Waymark JS</title>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="dist/css/waymark-js.css" />

    <!-- JS -->
    <script src="dist/js/waymark-js.js"></script>

    <style>
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        display: flex;
      }
      #waymark-data,
      #waymark-map {
      }
      #waymark-map {
        flex: 2;
      }
      #waymark-data {
        flex: 1;
      }
    </style>
  </head>
  <body>
    <div id="waymark-map" class="waymark-map"></div>
    <textarea id="waymark-data"></textarea>

    <script>
      // Set body height to be 100% of the viewport
      jQuery("body").height($(window).height());

      let waymark_instance = window.Waymark_Map_Factory.editor();

      const _configUrl = "docs/public/examples/assets/config/route.json";
      const _dataUrl = "docs/public/examples/assets/geo/route.geojson";

      Promise.all([
        fetch(_configUrl).then((r) => r.json()),
        fetch(_dataUrl).then((r) => r.json()),
      ])
        .then(([cfg, geo]) => {
          const base = {
            language: { sleep_wake_message: "Fart to wake!" },
            editor_options: { confirm_delete: "0" },
          };
          const initConfig = Object.assign({}, base, cfg);
          waymark_instance.init(initConfig);
          waymark_instance.load_json(geo);
        })
        .catch((err) => {
          console.error(err);
        });
    </script>
  </body>
</html>
